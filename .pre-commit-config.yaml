repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: detect-private-key
      - id: check-merge-conflict
      - id: end-of-file-fixer
      - id: trailing-whitespace
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.12.11
    hooks:
      - id: ruff-check
        args: [--fix]
      - id: ruff-format

  - repo: https://github.com/astral-sh/uv-pre-commit
    rev: 0.8.14
    hooks:
      - id: uv-lock
      - id: uv-export
        args: ["--no-hashes", "--output-file=requirements.txt"]

  - repo: local
    hooks:
      - id: biome
        name: Biome check (apps/web)
        entry: bash -lc 'cd apps/web && bunx @biomejs/biome check'
        language: system
        files: \.(js|jsx|ts|tsx|json|jsonc|css|yaml|yml)$
        pass_filenames: false

      - id: validate-documentation-authoritative
        name: Validate documentation (authoritative)
        entry: python scripts/validate_documentation.py --strict
        language: system
        files: \.md$
        pass_filenames: false
        description: Authoritative documentation validator (links, tools, quality, outdated)

      - id: docs-validate
        name: Docs validate (status+taxonomy+relationships+graph)
        entry: bash -lc 'make docs-validate'
        language: system
        pass_filenames: false
        always_run: true
        stages: [commit]
        files: ''

      - id: docs-fix-frontmatter-dry
        name: Docs frontmatter normalize (dry-run)
        entry: bash -lc 'python3 scripts/fix_frontmatter.py --enforce-tags'
        language: system
        pass_filenames: false
        always_run: true
        stages: [commit]
        files: ''
