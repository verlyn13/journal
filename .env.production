# ============================================
# FULL Production Environment Variables
# ============================================
# Domain: journal.thenash.group
# CDN: Cloudflare
# Secrets: Infisical (secrets.jefahnierocks.com)
#
# NOTE: Some variable names with brackets [] are for documentation only
# Replace [VALUE] with actual values when setting in Vercel

# ============================================
# FRONTEND CONFIGURATION (Vite/React)
# ============================================

# API URL - For initial deployment, use Vercel Functions
# Later update to your custom domain if you have one
VITE_API_URL=/api

# GraphQL endpoint (if using GraphQL)
VITE_GRAPHQL_URL=/api/graphql

# Application branding
VITE_APP_NAME=Journal
VITE_APP_VERSION=1.0.0

# Feature flags
VITE_ENABLE_DEBUG=false
VITE_ENABLE_MOCKS=false

# ============================================
# BACKEND CONFIGURATION (FastAPI/Vercel Functions)
# ============================================

# Environment
JOURNAL_ENV=production
NODE_ENV=production

# ============================================
# DATABASE (Supabase)
# ============================================
# Project: ecmnzrtsuajatmuahooa
# Region: US West 1 (aws-1-us-west-1)
# Updated: 2025-01-19

# Transaction Pooler (for Vercel/serverless) - Port 6543
# Format: postgresql://postgres.PROJECT_REF:PASSWORD@aws-1-REGION.pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres.ecmnzrtsuajatmuahooa:[PASSWORD]@aws-1-us-west-1.pooler.supabase.com:6543/postgres
JOURNAL_DB_URL=postgresql://postgres.ecmnzrtsuajatmuahooa:[PASSWORD]@aws-1-us-west-1.pooler.supabase.com:6543/postgres
JOURNAL_DB_URL_ASYNC=postgresql://postgres.ecmnzrtsuajatmuahooa:[PASSWORD]@aws-1-us-west-1.pooler.supabase.com:6543/postgres

# Session Pooler (for long-lived connections) - Port 5432
DATABASE_URL_SESSION=postgresql://postgres.ecmnzrtsuajatmuahooa:[PASSWORD]@aws-1-us-west-1.pooler.supabase.com:5432/postgres

# Direct Connection (IPv6, for migrations only)
DIRECT_URL=postgresql://postgres:[PASSWORD]@db.ecmnzrtsuajatmuahooa.supabase.co:5432/postgres

# Supabase keys
SUPABASE_URL=https://ecmnzrtsuajatmuahooa.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjbW56cnRzdWFqYXRtdWFob29hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMDY4OTAsImV4cCI6MjA3Mzg4Mjg5MH0.-98puJZrP8Zi55J9eswwsbX7SmXa-xUSJkHnwO0YQgw
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjbW56cnRzdWFqYXRtdWFob29hIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1ODMwNjg5MCwiZXhwIjoyMDczODgyODkwfQ.-QiS77O5vfZn4QD5iX1s12_qb7KKtoEw151zi7ZvPXM

# ============================================
# CACHE & SESSION STORAGE (Upstash Redis)
# ============================================
# Get these from Upstash dashboard

UPSTASH_REDIS_REST_URL=YOUR_UPSTASH_REST_URL_HERE
UPSTASH_REDIS_REST_TOKEN=YOUR_UPSTASH_REST_TOKEN_HERE
JOURNAL_REDIS_URL=YOUR_UPSTASH_REDIS_URL_HERE

# ============================================
# MESSAGE QUEUE (Optional - Upstash QStash)
# ============================================
# For background tasks and webhooks

QSTASH_URL=https://qstash.upstash.io/v2
QSTASH_TOKEN=YOUR_QSTASH_TOKEN_HERE
QSTASH_CURRENT_SIGNING_KEY=YOUR_QSTASH_SIGNING_KEY_HERE
QSTASH_NEXT_SIGNING_KEY=YOUR_QSTASH_NEXT_KEY_HERE

# ============================================
# AUTHENTICATION & SECURITY
# ============================================

# JWT Configuration
# Generated: 2025-01-19 (stored in gopass: development/journal/jwt_secret)
JOURNAL_JWT_SECRET=0bb13dbcda9c942dd827a222d89ed94d974a56e102b804387d77d5e399399fec
JOURNAL_JWT_ISS=journal-api
JOURNAL_JWT_AUD=journal-clients
JOURNAL_ACCESS_TOKEN_MINUTES=15
JOURNAL_REFRESH_TOKEN_DAYS=30

# JWT Algorithm (EdDSA recommended)
JOURNAL_JWT_ALGORITHM=EdDSA
JOURNAL_JWT_KEY_ROTATION_DAYS=60
JOURNAL_JWT_ENABLE_EDDSA=true

# WebAuthn/Passkeys for journal.thenash.group
JOURNAL_WEBAUTHN_RP_ID=journal.thenash.group
JOURNAL_WEBAUTHN_RP_NAME=Journal App
JOURNAL_WEBAUTHN_ORIGIN=https://journal.thenash.group

# Cookie configuration
JOURNAL_AUTH_COOKIE_REFRESH=true
JOURNAL_COOKIE_SECURE_DEFAULT=true
JOURNAL_COOKIE_SAMESITE=lax
JOURNAL_COOKIE_PATH=/api/v1/auth

# Rate limiting
JOURNAL_RATE_LIMIT_WINDOW_SECONDS=60
JOURNAL_RATE_LIMIT_MAX_ATTEMPTS=10

# ============================================
# SECRET MANAGEMENT (Optional - Infisical)
# ============================================
# If using Infisical for secrets

JOURNAL_INFISICAL_ENABLED=true
JOURNAL_INFISICAL_PROJECT_ID=d01f583a-d833-4375-b359-c702a726ac4d
JOURNAL_INFISICAL_SERVER_URL=https://secrets.jefahnierocks.com
INFISICAL_UNIVERSAL_AUTH_CLIENT_ID=YOUR_INFISICAL_CLIENT_ID_HERE
INFISICAL_UNIVERSAL_AUTH_CLIENT_SECRET=YOUR_INFISICAL_CLIENT_SECRET_HERE

# ============================================
# MONITORING & OBSERVABILITY (Optional)
# ============================================

# Sentry error tracking (optional)
SENTRY_DSN=YOUR_SENTRY_DSN_HERE
SENTRY_ENVIRONMENT=production

# OpenTelemetry (optional)
JOURNAL_OTLP_ENDPOINT=YOUR_OTLP_ENDPOINT_HERE

# Vercel Analytics (automatic, no config needed)
# Enabled by default in production

# ============================================
# CORS & SECURITY HEADERS
# ============================================

# Trusted proxy IPs (Vercel + Cloudflare)
# Note: In Vercel env vars, use comma-separated string: 76.76.21.21,173.245.48.0/20
JOURNAL_TRUSTED_PROXIES=76.76.21.21,173.245.48.0/20,103.21.244.0/22,103.22.200.0/22,103.31.4.0/22,141.101.64.0/18,108.162.192.0/18,190.93.240.0/20,188.114.96.0/20,197.234.240.0/22,198.41.128.0/17,162.158.0.0/15,104.16.0.0/13,104.24.0.0/14,172.64.0.0/13,131.0.72.0/22

# CORS origins (development-friendly for frequent updates)
# Note: In Vercel, enter as comma-separated string without brackets
CORS_ORIGINS=https://journal.thenash.group,https://journal-*.vercel.app,http://localhost:3000,http://localhost:5173,http://localhost:5000

# ============================================
# FEATURE FLAGS
# ============================================

JOURNAL_USER_MGMT_ENABLED=true
JOURNAL_AUTH_REQUIRE_EMAIL_VERIFY=false
JOURNAL_AUTO_EMBED_MODE=event

# ============================================
# DEPLOYMENT CONFIGURATION
# ============================================

# Vercel specific (set automatically)
VERCEL=1
VERCEL_ENV=production
VERCEL_URL=
VERCEL_REGION=

# ============================================
# NOTES FOR DEPLOYMENT
# ============================================
#
# 1. REQUIRED variables for initial deployment:
#    - VITE_API_URL (set to /api)
#    - JOURNAL_JWT_SECRET (generate secure random)
#    - Database URLs (from Supabase)
#    - Redis URLs (from Upstash)
#
# 2. GENERATE secure secrets:
#    - JWT Secret: openssl rand -hex 32
#    - API Keys: use uuid or similar
#
# 3. UPDATE after deployment:
#    - VITE_API_URL to your actual domain
#    - WebAuthn settings to match your domain
#    - CORS origins
#
# 4. OPTIONAL services:
#    - Sentry for error tracking
#    - Infisical for secret management
#    - QStash for background jobs
#
# ============================================